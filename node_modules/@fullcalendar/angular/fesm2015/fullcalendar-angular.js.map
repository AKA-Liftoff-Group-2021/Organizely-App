{"version":3,"file":"fullcalendar-angular.js","sources":["../../projects/fullcalendar/src/lib/utils.ts","../../projects/fullcalendar/src/lib/fullcalendar-options.ts","../../projects/fullcalendar/src/lib/fullcalendar.component.ts","../../projects/fullcalendar/src/lib/fullcalendar.module.ts","../../../projects/fullcalendar/src/public_api.ts","../../../projects/fullcalendar/src/fullcalendar-angular.ts"],"sourcesContent":["\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/*\nReally simple clone utility. Only copies plain arrays, objects, and Dates. Transfers everything else as-is.\nWanted to use a third-party lib, but none did exactly this.\n*/\nexport function deepCopy(input) {\n\n  if (Array.isArray(input)) {\n    return input.map(deepCopy);\n\n  } else if (input instanceof Date) {\n    return new Date(input.valueOf());\n\n  } else if (typeof input === 'object' && input) { // non-null object\n    return mapHash(input, deepCopy);\n\n  } else { // everything else (null, function, etc)\n    return input;\n  }\n}\n\n\nexport function shallowCopy(val) {\n  if (typeof val === 'object') {\n    if (Array.isArray(val)) {\n      val = Array.prototype.slice.call(val);\n    } else if (val) { // non-null\n      val = { ...val };\n    }\n  }\n  return val;\n}\n\n\nexport function mapHash(input, func) {\n  const output = {};\n\n  for (const key in input) {\n    if (hasOwnProperty.call(input, key)) {\n      output[key] = func(input[key], key);\n    }\n  }\n\n  return output;\n}\n","\nexport const OPTION_IS_DEEP = {\n  headerToolbar: true,\n  footerToolbar: true,\n  events: true,\n  eventSources: true,\n  resources: true\n};\n","import deepEqual from 'fast-deep-equal';\nimport {\n  Component,\n  ElementRef,\n  Input,\n  AfterViewInit,\n  DoCheck,\n  AfterContentChecked,\n  OnDestroy,\n  ViewEncapsulation\n} from '@angular/core';\nimport { Calendar, CalendarOptions } from '@fullcalendar/core';\nimport { deepCopy, shallowCopy, mapHash } from './utils';\nimport { OPTION_IS_DEEP } from './fullcalendar-options';\n\n@Component({\n  selector: 'full-calendar',\n  template: '',\n  styleUrls: ['./fullcalendar.component.scss'],\n  encapsulation: ViewEncapsulation.None // the styles are root-level, not scoped within the component\n})\nexport class FullCalendarComponent implements AfterViewInit, DoCheck, AfterContentChecked, OnDestroy {\n\n  @Input() options?: CalendarOptions;\n  @Input() deepChangeDetection?: boolean;\n\n  private calendar: Calendar;\n  private optionSnapshot: object = {}; // for diffing only\n\n  constructor(private element: ElementRef) {\n  }\n\n  ngAfterViewInit() {\n    const { deepChangeDetection } = this;\n    const options = this.options || {};\n\n    // initialize snapshot\n    this.optionSnapshot = mapHash(options, (optionVal, optionName) => (\n      (deepChangeDetection && OPTION_IS_DEEP[optionName])\n        ? deepCopy(optionVal)\n        : optionVal\n    ));\n\n    this.calendar = new Calendar(this.element.nativeElement, options);\n    this.calendar.render();\n  }\n\n  /*\n  allows us to manually detect complex input changes, internal mutations to certain options.\n  called before ngOnChanges. called much more often than ngOnChanges.\n  */\n  ngDoCheck() {\n    if (this.calendar) { // not the initial render\n      const { deepChangeDetection, optionSnapshot } = this;\n      const newOptions = this.options || {};\n      const newProcessedOptions = {};\n      let anyChanges = false;\n\n      // detect adds and updates (and update snapshot)\n      for (const optionName in newOptions) {\n        if (newOptions.hasOwnProperty(optionName)) {\n          let optionVal = newOptions[optionName];\n\n          if (deepChangeDetection && OPTION_IS_DEEP[optionName]) {\n            if (!deepEqual(optionSnapshot[optionName], optionVal)) {\n              optionSnapshot[optionName] = deepCopy(optionVal);\n              anyChanges = true;\n\n              // trick FC into knowing about a nested change.\n              // TODO: future versions won't need this.\n              // can't use the previously-made deep copy because it blows away prototype-association.\n              optionVal = shallowCopy(optionVal);\n            }\n\n          } else {\n            if (optionSnapshot[optionName] !== optionVal) {\n              optionSnapshot[optionName] = optionVal;\n              anyChanges = true;\n            }\n          }\n\n          newProcessedOptions[optionName] = optionVal;\n        }\n      }\n\n      const oldOptionNames = Object.keys(optionSnapshot);\n\n      // detect removals (and update snapshot)\n      for (const optionName of oldOptionNames) {\n        if (!(optionName in newOptions)) { // doesn't exist in new options?\n          delete optionSnapshot[optionName];\n          anyChanges = true;\n        }\n      }\n\n      if (anyChanges) {\n        this.calendar.pauseRendering();\n        this.calendar.resetOptions(newProcessedOptions);\n      }\n    }\n  }\n\n  ngAfterContentChecked() {\n    if (this.calendar) { // too defensive?\n      this.calendar.resumeRendering();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.calendar) { // too defensive?\n      this.calendar.destroy();\n      this.calendar = null;\n    }\n  }\n\n  public getApi(): Calendar {\n    return this.calendar;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { globalPlugins, PluginDef } from '@fullcalendar/core';\nimport { FullCalendarComponent } from './fullcalendar.component';\n\n@NgModule({\n  declarations: [FullCalendarComponent],\n  imports: [],\n  exports: [FullCalendarComponent]\n})\nexport class FullCalendarModule {\n\n  static registerPlugins(plugins: PluginDef[]) {\n    globalPlugins.push(...plugins);\n  }\n\n}\n","/*\n * Public API Surface of fullcalendar\n */\n\nexport * from './lib/fullcalendar.component';\nexport * from './lib/fullcalendar.module';\n\n// make available all of FC's utils/types\nexport * from '@fullcalendar/core';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}